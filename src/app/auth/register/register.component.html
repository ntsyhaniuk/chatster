<div class="register-wrapper">
  <h1>Register page</h1>
  <form novalidate (ngSubmit)="onSubmit(user)" [formGroup]="user">
    <div class="form-group">
      <label for="firstName">
        <span>First Name</span>
      </label>
      <input
        id="firstName"
        class="form-control"
        type="text"
        placeholder="First Name"
        formControlName="firstName" required>
      <div class="alert alert-danger" *ngIf="user.get('firstName').invalid && user.get('firstName').touched">
        <p *ngIf="user.get('firstName').hasError('required')">First Name is required</p>
        <p *ngIf="user.get('firstName').hasError('minlength')">Min. length - 2 characters</p>
      </div>
    </div>
    <div class="form-group">
      <label for="lastName">
        <span>Last Name</span>
      </label>
      <input
        id="lastName"
        class="form-control"
        type="text"
        placeholder="Last Name"
        formControlName="lastName" required>
      <div class="alert alert-danger" *ngIf="user.get('lastName').invalid && user.get('lastName').touched">
        <p *ngIf="user.get('lastName').hasError('required')">Last Name is required</p>
        <p *ngIf="user.get('lastName').hasError('minlength')">Min. length - 2 characters</p>
      </div>
    </div>
    <div class="form-group">
      <label for="email">
        <span>Email</span>
      </label>
      <input
        id="email"
        class="form-control"
        type="email"
        placeholder="Email"
        formControlName="email" required>
      <div class="alert alert-danger"
        *ngIf="user.get('email').hasError('required') && user.get('email').touched">
        Email is required
      </div>
      <div class="alert alert-danger"
        *ngIf="user.get('email').hasError('CustomEmailValidator') && !user.get('email').hasError('required') && user.get('email').touched">
        Email is invalid
      </div>
    </div>
    <div formGroupName="passwords">
      <div class="form-group">
        <label for="password">
          <span>Password</span>
        </label>
          <input
            id="password"
            class="form-control"
            type="password"
            placeholder="password"
            formControlName="password" required>
          <div class="alert alert-danger" *ngIf="user.get('passwords').get('password').invalid && user.get('passwords').get('password').touched">
            <p *ngIf="user.get('passwords').get('password').hasError('required')">Password is required</p>
            <p *ngIf="user.get('passwords').get('password').hasError('minlength')">Too short. Min length - 8 characters</p>
          </div>
      </div>
      <div class="form-group">
        <label for="confirm">
          <span>Confirm password</span>
        </label>
          <input
            id="confirm"
            class="form-control"
            type="password"
            placeholder="Confirm password"
            formControlName="confirmPassword" required>
          <div class="alert alert-danger" *ngIf="user.get('passwords').invalid && user.get('passwords').get('confirmPassword').touched">
            <p *ngIf="user.get('passwords').get('confirmPassword').hasError('required')">Password confirmation is required</p>
            <p *ngIf="user.get('passwords').get('confirmPassword').hasError('minlength')">Too short. Min length - 8 characters</p>
            <p *ngIf="user.get('passwords').hasError('notSamePassword')"> Passwords do not match</p>
          </div>
      </div>
    </div>
    <button class="btn btn-success" type="submit" [disabled]="user.invalid">Sign up</button>
  </form>
</div>
